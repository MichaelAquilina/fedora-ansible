---

- name: ZSH is installed
  become: "yes"
  zypper:
    name: zsh

- name: Command Line Apps are Installed
  become: "yes"
  zypper:
    name: "{{ item }}"
    state: latest
  loop: "{{ cli_apps }}"

# Required for user to be able to adjust brightness settings
- name: current user is in video group
  become: "yes"
  user:
    name: "{{ ansible_user_id }}"
    groups: video
    append: "yes"

- name: ZPlug is installed
  git:
    repo: https://github.com/MichaelAquilina/zplug
    dest: ~/.zplug
    # zplug often makes changes to itself
    force: "yes"
    update: "yes"

- name: dircolors
  file:
    state: link
    force: "yes"
    src: "{{ ansible_env.PWD }}/roles/cli/files/dircolors"
    dest: "~/.dircolors"

- name: zshrc repo
  git:
    repo: https://github.com/MichaelAquilina/zshrc.git
    update: "yes"
    remote: https-origin  # allow origin to be ssh url
    dest: ~/Development/zshrc

- name: ~/.zshrc
  file:
    state: link
    force: "yes"
    src: ~/Development/zshrc/zshrc
    dest: ~/.zshrc

- name: ~/.tigrc
  file:
    state: link
    force: "yes"
    src: "{{ ansible_env.PWD }}/roles/cli/files/tigrc"
    dest: "~/.tigrc"

- name: ZSH as default shell
  become: "yes"
  user:
    name: "{{ ansible_user_id }}"
    shell: /bin/zsh

- name: User in systemd-journal group
  become: "yes"
  user:
    name: "{{ ansible_user_id }}"
    groups: systemd-journal
    append: "yes"

- name: local bin dirtory
  file:
    state: directory
    mode: 0700
    path: ~/bin/

- name: local man directory
  file:
    state: directory
    mode: 0700
    path: ~/man/man1
    recurse: true
